"use strict";
class ImmutableArrayIterator {
    constructor(_array) {
        this._array = _array;
        this._index = 0;
    }
    next() {
        let _done = this._index < this._array.length;
        let _result = {
            done: _done,
            value: _done ? null : this._array.get(this._index),
        };
        this._index++;
        return _result;
    }
}
class ImmutableArray {
    constructor(_obj) {
        if (_obj instanceof ImmutableArray) {
            this._arr = [..._obj._arr];
        }
        else if (_obj instanceof Array) {
            this._arr = [..._obj];
        }
        else
            throw new Error("Illegal data.");
    }
    push(_elm) {
        let newIm = new ImmutableArray(this);
        newIm._arr.push(_elm);
        return newIm;
    }
    pop() {
        let newIm = new ImmutableArray(this);
        newIm._arr.pop();
        return newIm;
    }
    get(index) {
        return this._arr[index];
    }
    set(index, elm) {
        let newIm = new ImmutableArray(this);
        newIm._arr[index] = elm;
    }
    slice(begin, end) {
        let newIm = new ImmutableArray(this);
        if (end) {
            newIm._arr = newIm._arr.slice(begin, end);
        }
        else {
            newIm._arr = newIm._arr.slice(begin);
        }
        return newIm;
    }
    resize(size) {
        let newIm = new ImmutableArray(this);
        newIm._arr.length = size;
        return newIm;
    }
    get length() {
        return this._arr.length;
    }
    forEach(_fun) {
        this._arr.forEach(_fun);
    }
    [Symbol.iterator]() {
        return new ImmutableArrayIterator(this);
    }
}
exports.ImmutableArray = ImmutableArray;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlsL2ltbXV0YWJsZS9hcnJheS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7SUFLSSxZQUFZLE1BQXlCO1FBQ2pDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3BCLENBQUM7SUFFRCxJQUFJO1FBQ0EsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUM3QyxJQUFJLE9BQU8sR0FBSTtZQUNYLElBQUksRUFBRSxLQUFLO1lBQ1gsS0FBSyxFQUFFLEtBQUssR0FBRSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztTQUNwRCxDQUFBO1FBQ0QsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2QsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNuQixDQUFDO0FBRUwsQ0FBQztBQUVEO0lBSUksWUFBWSxJQUFrQztRQUMxQyxFQUFFLENBQUMsQ0FBQyxJQUFJLFlBQVksY0FBYyxDQUFDLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0IsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUMxQixDQUFDO1FBQUMsSUFBSTtZQUNGLE1BQU0sSUFBSSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVELElBQUksQ0FBQyxJQUFPO1FBQ1IsSUFBSSxLQUFLLEdBQUcsSUFBSSxjQUFjLENBQUksSUFBSSxDQUFDLENBQUM7UUFDeEMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEIsTUFBTSxDQUFDLEtBQUssQ0FBQTtJQUNoQixDQUFDO0lBRUQsR0FBRztRQUNDLElBQUksS0FBSyxHQUFHLElBQUksY0FBYyxDQUFJLElBQUksQ0FBQyxDQUFDO1FBQ3hDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDakIsTUFBTSxDQUFDLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRUQsR0FBRyxDQUFDLEtBQWE7UUFDYixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRUQsR0FBRyxDQUFDLEtBQWEsRUFBRSxHQUFNO1FBQ3JCLElBQUksS0FBSyxHQUFHLElBQUksY0FBYyxDQUFJLElBQUksQ0FBQyxDQUFDO1FBQ3hDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDO0lBQzVCLENBQUM7SUFFRCxLQUFLLENBQUMsS0FBYSxFQUFFLEdBQVk7UUFDN0IsSUFBSSxLQUFLLEdBQUcsSUFBSSxjQUFjLENBQUksSUFBSSxDQUFDLENBQUM7UUFDeEMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNOLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzlDLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekMsQ0FBQztRQUNELE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVELE1BQU0sQ0FBQyxJQUFZO1FBQ2YsSUFBSSxLQUFLLEdBQUcsSUFBSSxjQUFjLENBQUksSUFBSSxDQUFDLENBQUM7UUFDeEMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1FBQ3pCLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVELElBQUksTUFBTTtRQUNOLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUM1QixDQUFDO0lBRUQsT0FBTyxDQUFDLElBQWdCO1FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDYixNQUFNLENBQUMsSUFBSSxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM1QyxDQUFDO0FBRUwsQ0FBQztBQTlEWSxzQkFBYyxpQkE4RDFCLENBQUEiLCJmaWxlIjoidXRpbC9pbW11dGFibGUvYXJyYXkuanMiLCJzb3VyY2VSb290Ijoic3JjLyJ9
