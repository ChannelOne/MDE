"use strict";
class ImmutableArrayIterator {
    constructor(_array) {
        this._array = _array;
        this._index = 0;
    }
    next() {
        let _done = this._index < this._array.length;
        let _result = {
            done: _done,
            value: _done ? null : this._array.get(this._index),
        };
        this._index++;
        return _result;
    }
}
class ImmutableArray {
    constructor(_obj) {
        if (_obj instanceof ImmutableArray) {
            this._arr = [..._obj._arr];
        }
        else if (_obj instanceof Array) {
            this._arr = [..._obj];
        }
        else {
            this._arr = [];
        }
    }
    push(_elm) {
        let newIm = new ImmutableArray(this);
        newIm._arr.push(_elm);
        return newIm;
    }
    pop() {
        let newIm = new ImmutableArray(this);
        newIm._arr.pop();
        return newIm;
    }
    get(index) {
        return this._arr[index];
    }
    set(index, elm) {
        let newIm = new ImmutableArray(this);
        newIm._arr[index] = elm;
    }
    slice(begin, end) {
        let newIm = new ImmutableArray(this);
        if (end) {
            newIm._arr = newIm._arr.slice(begin, end);
        }
        else {
            newIm._arr = newIm._arr.slice(begin);
        }
        return newIm;
    }
    resize(size) {
        let newIm = new ImmutableArray(this);
        newIm._arr.length = size;
        return newIm;
    }
    get length() {
        return this._arr.length;
    }
    forEach(_fun) {
        this._arr.forEach(_fun);
    }
    [Symbol.iterator]() {
        return new ImmutableArrayIterator(this);
    }
}
exports.ImmutableArray = ImmutableArray;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlsL2ltbXV0YWJsZS9hcnJheS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7SUFLSSxZQUFZLE1BQXlCO1FBQ2pDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3BCLENBQUM7SUFFRCxJQUFJO1FBQ0EsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUM3QyxJQUFJLE9BQU8sR0FBSTtZQUNYLElBQUksRUFBRSxLQUFLO1lBQ1gsS0FBSyxFQUFFLEtBQUssR0FBRSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztTQUNwRCxDQUFBO1FBQ0QsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2QsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNuQixDQUFDO0NBRUo7QUFFRDtJQUlJLFlBQVksSUFBbUM7UUFDM0MsRUFBRSxDQUFDLENBQUMsSUFBSSxZQUFZLGNBQWMsQ0FBQyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9CLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDMUIsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUE7UUFDbEIsQ0FBQztJQUNMLENBQUM7SUFFRCxJQUFJLENBQUMsSUFBTztRQUNSLElBQUksS0FBSyxHQUFHLElBQUksY0FBYyxDQUFJLElBQUksQ0FBQyxDQUFDO1FBQ3hDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RCLE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDaEIsQ0FBQztJQUVELEdBQUc7UUFDQyxJQUFJLEtBQUssR0FBRyxJQUFJLGNBQWMsQ0FBSSxJQUFJLENBQUMsQ0FBQztRQUN4QyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVELEdBQUcsQ0FBQyxLQUFhO1FBQ2IsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUVELEdBQUcsQ0FBQyxLQUFhLEVBQUUsR0FBTTtRQUNyQixJQUFJLEtBQUssR0FBRyxJQUFJLGNBQWMsQ0FBSSxJQUFJLENBQUMsQ0FBQztRQUN4QyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQztJQUM1QixDQUFDO0lBRUQsS0FBSyxDQUFDLEtBQWEsRUFBRSxHQUFZO1FBQzdCLElBQUksS0FBSyxHQUFHLElBQUksY0FBYyxDQUFJLElBQUksQ0FBQyxDQUFDO1FBQ3hDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDTixLQUFLLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixLQUFLLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pDLENBQUM7UUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRCxNQUFNLENBQUMsSUFBWTtRQUNmLElBQUksS0FBSyxHQUFHLElBQUksY0FBYyxDQUFJLElBQUksQ0FBQyxDQUFDO1FBQ3hDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztRQUN6QixNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRCxJQUFJLE1BQU07UUFDTixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDNUIsQ0FBQztJQUVELE9BQU8sQ0FBQyxJQUFnQjtRQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRUQsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO1FBQ2IsTUFBTSxDQUFDLElBQUksc0JBQXNCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDNUMsQ0FBQztDQUVKO0FBL0RELHdDQStEQyIsImZpbGUiOiJ1dGlsL2ltbXV0YWJsZS9hcnJheS5qcyIsInNvdXJjZVJvb3QiOiJzcmMvIn0=
