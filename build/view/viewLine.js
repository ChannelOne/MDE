"use strict";
const dom_1 = require("../util/dom");
class ViewLine {
    constructor(_m) {
        this._elem = dom_1.elem("div", "render-line");
        this._model = _m;
        this._elem.innerText = _m.text;
        this._clickEventHandler = new Array();
        this._elem.addEventListener('click', (e) => {
            this.fireClickEvent(this, e);
        });
        this._model.onInsert((lm, e) => {
            this._elem.innerHTML = lm.text;
        });
        this._model.onDelete((lm, e) => {
            this._elem.innerHTML = lm.text;
        });
    }
    fireClickEvent(vl, e) {
        for (let i = 0; i < this._clickEventHandler.length; i++) {
            this._clickEventHandler[i](vl, e);
        }
    }
    onClickEvent(fun) {
        this._clickEventHandler.push(fun);
    }
    getElement() {
        return this._elem;
    }
    appendTo(elem) {
        elem.appendChild(this._elem);
    }
    get lineNumber() {
        return this._model.number;
    }
    get coordinate() {
        return this._elem.getBoundingClientRect();
    }
}
exports.ViewLine = ViewLine;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy92aWV3L3ZpZXdMaW5lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxzQkFBNkIsYUFDN0IsQ0FBQyxDQUR5QztBQUcxQztJQWFJLFlBQVksRUFBYztRQUN0QixJQUFJLENBQUMsS0FBSyxHQUFHLFVBQUksQ0FBQyxLQUFLLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDeEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFFakIsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQztRQUUvQixJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxLQUFLLEVBQXNDLENBQUM7UUFFMUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFjO1lBQ2hELElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRWpDLENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFhLEVBQUUsQ0FBUztZQUMxQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFBO1FBQ2xDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFhLEVBQUUsQ0FBUztZQUMxQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFBO1FBQ2xDLENBQUMsQ0FBQyxDQUFBO0lBRU4sQ0FBQztJQTNCTyxjQUFjLENBQUMsRUFBYSxFQUFFLENBQWM7UUFDaEQsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDdEQsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0QyxDQUFDO0lBQ0wsQ0FBQztJQXlCRCxZQUFZLENBQUMsR0FBd0M7UUFDakQsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsVUFBVTtRQUNOLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxRQUFRLENBQUMsSUFBa0I7UUFDeEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksVUFBVTtRQUNWLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUM5QixDQUFDO0lBRUQsSUFBSSxVQUFVO1FBQ1YsTUFBTSxDQUFFLElBQUksQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUUsQ0FBQztJQUMvQyxDQUFDO0FBRUwsQ0FBQztBQXhEWSxnQkFBUSxXQXdEcEIsQ0FBQSIsImZpbGUiOiJ2aWV3L3ZpZXdMaW5lLmpzIiwic291cmNlUm9vdCI6InNyYy8ifQ==
